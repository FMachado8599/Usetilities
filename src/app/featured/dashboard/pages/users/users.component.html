<div class="sectino-container">
  <dashboard-new-user-form
    *ngIf="showForm"
    (submitted)="onFormSubmitted()"
    (cancelled)="onCancelled()"
    class="add-entity-form-container"
  ></dashboard-new-user-form>

  <div class="section-options">
    <h1 class="main-component-title">Users</h1>
    <button *ngIf="!showForm" (click)="onAddUser()">
      + <img src="/assets/svg/avatar.svg" alt="" />
    </button>
  </div>

  <section class="entity-section component-gral">
    <div>
      <table class="table table-dark entitiy-table">
        <thead>
          <tr>
            <th scope="col">ID</th>
            <th scope="col">Username</th>
            <th scope="col">email</th>
            <th scope="col">Role</th>
            <th scope="col"></th>
            <th scope="col"></th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let user of users">
            <td scope="row">
              {{ user.id }}
            </td>
            <td>
              {{ user.username }}
            </td>
            <td>
              {{ user.email }}
            </td>
            <td>
              @if(user.isAdmin) {
              <span class="admin-role">Admin</span>
              } @else {
              <span class="user-role">User</span>
              }
            </td>
            <td>
              <mat-icon
                class="entity-edit"
                svgIcon="edit"
                [routerLink]="[user.id]"
                aria-label="Edit user"
              ></mat-icon>
            </td>
            <td>
              <shared-confirm-dialog-button
                [entityName]="user.username"
                [userId]="user.id!"
                (confirmed_user)="deleteUser($event)"
              >
              </shared-confirm-dialog-button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </section>
</div>
